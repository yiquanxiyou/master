!function(n){var t=this;t.when=n()}(function(){var n;return function t(n,e,r){function o(u,c){if(!e[u]){if(!n[u]){var f="function"==typeof require&&require;if(!c&&f)return f(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var l=e[u]={exports:{}};n[u][0].call(l.exports,function(t){var e=n[u][1][t];return o(e?e:t)},l,l.exports,t,n,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(n,t,e){var r=t.exports=n("../when");r.callbacks=n("../callbacks"),r.cancelable=n("../cancelable"),r.delay=n("../delay"),r.fn=n("../function"),r.guard=n("../guard"),r.keys=n("../keys"),r.nodefn=r.node=n("../node"),r.parallel=n("../parallel"),r.pipeline=n("../pipeline"),r.poll=n("../poll"),r.sequence=n("../sequence"),r.timeout=n("../timeout")},{"../callbacks":2,"../cancelable":3,"../delay":4,"../function":5,"../guard":6,"../keys":7,"../node":26,"../parallel":27,"../pipeline":28,"../poll":29,"../sequence":30,"../timeout":31,"../when":32}],2:[function(t,e,r){!function(n){n(function(n){function t(n,t){return v(n,this,t||[])}function e(n,t,e,o){e.push(l(o.resolve,o),l(o.reject,o)),r(n,t,e,o)}function r(n,t,e,r){try{n.apply(t,e)}catch(o){r.reject(o)}}function o(n){return v(n,this,d.call(arguments,1))}function i(n){var t=arguments.length>1?d.call(arguments,1):[];return function(){return v(n,this,t.concat(d.call(arguments)))}}function u(n,t,e){return p(i,t,e,n)}function c(n,t){return function(){var e=this;return h.all(arguments).then(function(r){var o,i,u=h._defer();return"number"==typeof t.callback&&(o=f(r,t.callback)),"number"==typeof t.errback&&(i=f(r,t.errback)),o>i?(a(r,i,u._handler.reject,u._handler),a(r,o,u._handler.resolve,u._handler)):(a(r,o,u._handler.resolve,u._handler),a(r,i,u._handler.reject,u._handler)),n.apply(e,r),u})}}function f(n,t){return 0>t?n.length+t+2:t}function a(n,t,e,r){"number"==typeof t&&n.splice(t,0,l(e,r))}function l(n,t){return function(){arguments.length>1?n.call(t,d.call(arguments)):n.apply(t,arguments)}}var s=n("./when"),h=s.Promise,p=n("./lib/liftAll"),d=Array.prototype.slice,y=n("./lib/apply"),v=y(h,e);return{lift:i,liftAll:u,apply:t,call:o,promisify:c}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./lib/apply":11,"./lib/liftAll":23,"./when":32}],3:[function(t,e,r){!function(n){n(function(){return function(n,t){return n.cancel=function(){try{n.reject(t(n))}catch(e){n.reject(e)}return n.promise},n}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],4:[function(t,e,r){!function(n){n(function(n){var t=n("./when");return function(n,e){return t(e).delay(n)}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./when":32}],5:[function(t,e,r){!function(n){n(function(n){function t(n,t){return f(n,this,null==t?[]:a.call(t))}function e(n){var t=arguments.length>1?a.call(arguments,1):[];return function(){return f(n,this,t.concat(a.call(arguments)))}}function r(n,t,r){return c(e,t,r,n)}function o(n){var t=a.call(arguments,1);return function(){var e=this,r=a.call(arguments),o=u.apply(e,[n].concat(r));return i.reduce(t,function(n,t){return t.call(e,n)},o)}}var i=n("./when"),u=i["try"],c=n("./lib/liftAll"),f=n("./lib/apply")(i.Promise),a=Array.prototype.slice;return{lift:e,liftAll:r,call:u,apply:t,compose:o}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./lib/apply":11,"./lib/liftAll":23,"./when":32}],6:[function(t,e,r){!function(n){n(function(n){function t(n,t){return function(){var e=o.call(arguments);return r(n()).withThis(this).then(function(n){return r(t.apply(this,e))["finally"](n)})}}function e(n){function t(){e=Math.max(e-1,0),o.length>0&&o.shift()(t)}var e=0,o=[];return function(){return r.promise(function(r){n>e?r(t):o.push(r),e+=1})}}var r=n("./when"),o=Array.prototype.slice;return t.n=e,t})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./when":32}],7:[function(t,e,r){!function(n){n(function(n){function t(n){function t(n,t,e){this[n]=t,0===--f&&e.resolve(u)}for(var e,r=o._defer(),i=o._handler(r),u={},c=Object.keys(n),f=c.length,a=0;a<c.length;++a)e=c[a],o._handler(n[e]).fold(t,e,u,i);return 0===f&&i.resolve(u),r}function e(n,e){function r(n,t){return e(t,n)}return i(n).then(function(n){return t(Object.keys(n).reduce(function(t,e){return t[e]=i(n[e]).fold(r,e),t},{}))})}var r=n("./when"),o=r.Promise,i=r.resolve;return{all:r.lift(t),map:e}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./when":32}],8:[function(t,e,r){!function(n){n(function(n){var t=n("./makePromise"),e=n("./Scheduler"),r=n("./env").asap;return t({scheduler:new e(r)})})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./Scheduler":9,"./env":21,"./makePromise":24}],9:[function(t,e,r){!function(n){n(function(){function n(n){this._async=n,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return n.prototype.enqueue=function(n){this._queue[this._queueLen++]=n,this.run()},n.prototype.afterQueue=function(n){this._afterQueue[this._afterQueueLen++]=n,this.run()},n.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},n.prototype._drain=function(){for(var n=0;n<this._queueLen;++n)this._queue[n].run(),this._queue[n]=void 0;for(this._queueLen=0,this._running=!1,n=0;n<this._afterQueueLen;++n)this._afterQueue[n].run(),this._afterQueue[n]=void 0;this._afterQueueLen=0},n})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],10:[function(t,e,r){!function(n){n(function(){function n(t){Error.call(this),this.message=t,this.name=n.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],11:[function(t,e,r){!function(n){n(function(){function n(n,e){function r(t,r,i){var u=n._defer(),c=i.length,f=new Array(c);return o({f:t,thisArg:r,args:i,params:f,i:c-1,call:e},u._handler),u}function o(t,r){if(t.i<0)return e(t.f,t.thisArg,t.params,r);var o=n._handler(t.args[t.i]);o.fold(i,t,void 0,r)}function i(n,t,e){n.params[n.i]=t,n.i-=1,o(n,e)}return arguments.length<2&&(e=t),r}function t(n,t,e,r){try{r.resolve(n.apply(t,e))}catch(o){r.reject(o)}}return n.tryCatchResolve=t,n})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],12:[function(t,e,r){!function(n){n(function(n){var t=n("../state"),e=n("../apply");return function(n){function r(t){function e(n){l=null,this.resolve(n)}function r(n){this.resolved||(l.push(n),0===--a&&this.reject(l))}for(var o,i,u=n._defer(),c=u._handler,f=t.length>>>0,a=f,l=[],s=0;f>s;++s)if(i=t[s],void 0!==i||s in t){if(o=n._handler(i),o.state()>0){c.become(o),n._visitRemaining(t,s,o);break}o.visit(c,e,r)}else--a;return 0===a&&c.reject(new RangeError("any(): array must not be empty")),u}function o(t,e){function r(n){this.resolved||(l.push(n),0===--p&&(s=null,this.resolve(l)))}function o(n){this.resolved||(s.push(n),0===--i&&(l=null,this.reject(s)))}var i,u,c,f=n._defer(),a=f._handler,l=[],s=[],h=t.length>>>0,p=0;for(c=0;h>c;++c)u=t[c],(void 0!==u||c in t)&&++p;for(e=Math.max(e,0),i=p-e+1,p=Math.min(e,p),e>p?a.reject(new RangeError("some(): array must contain at least "+e+" item(s), but had "+p)):0===p&&a.resolve(l),c=0;h>c;++c)u=t[c],(void 0!==u||c in t)&&n._handler(u).visit(a,r,o,a.notify);return f}function i(t,e){return n._traverse(e,t)}function u(t,e){var r=g.call(t);return n._traverse(e,r).then(function(n){return c(r,n)})}function c(t,e){for(var r=e.length,o=new Array(r),i=0,u=0;r>i;++i)e[i]&&(o[u++]=n._handler(t[i]).value);return o.length=u,o}function f(n){return y(n.map(a))}function a(e){var r=n._handler(e);return 0===r.state()?d(e).then(t.fulfilled,t.rejected):(r._unreport(),t.inspect(r))}function l(n,t){return arguments.length>2?v.call(n,h(t),arguments[2]):v.call(n,h(t))}function s(n,t){return arguments.length>2?m.call(n,h(t),arguments[2]):m.call(n,h(t))}function h(n){return function(t,e,r){return p(n,void 0,[t,e,r])}}var p=e(n),d=n.resolve,y=n.all,v=Array.prototype.reduce,m=Array.prototype.reduceRight,g=Array.prototype.slice;return n.any=r,n.some=o,n.settle=f,n.map=i,n.filter=u,n.reduce=l,n.reduceRight=s,n.prototype.spread=function(n){return this.then(y).then(function(t){return n.apply(this,t)})},n}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"../apply":11,"../state":25}],13:[function(t,e,r){!function(n){n(function(){function n(){throw new TypeError("catch predicate must be a function")}function t(n,t){return e(t)?n instanceof t:t(n)}function e(n){return n===Error||null!=n&&n.prototype instanceof Error}function r(n){return("object"==typeof n||"function"==typeof n)&&null!==n}function o(n){return n}return function(e){function i(n,e){return function(r){return t(r,e)?n.call(this,r):a(r)}}function u(n,t,e,o){var i=n.call(t);return r(i)?c(i,e,o):e(o)}function c(n,t,e){return f(n).then(function(){return t(e)})}var f=e.resolve,a=e.reject,l=e.prototype["catch"];return e.prototype.done=function(n,t){this._handler.visit(this._handler.receiver,n,t)},e.prototype["catch"]=e.prototype.otherwise=function(t){return arguments.length<2?l.call(this,t):"function"!=typeof t?this.ensure(n):l.call(this,i(arguments[1],t))},e.prototype["finally"]=e.prototype.ensure=function(n){return"function"!=typeof n?this:this.then(function(t){return u(n,this,o,t)},function(t){return u(n,this,a,t)})},e.prototype["else"]=e.prototype.orElse=function(n){return this.then(void 0,function(){return n})},e.prototype["yield"]=function(n){return this.then(function(){return n})},e.prototype.tap=function(n){return this.then(n)["yield"](this)},e}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],14:[function(t,e,r){!function(n){n(function(){return function(n){return n.prototype.fold=function(t,e){var r=this._beget();return this._handler.fold(function(e,r,o){n._handler(e).fold(function(n,e,r){r.resolve(t.call(this,e,n))},r,this,o)},e,r._handler.receiver,r._handler),r},n}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],15:[function(t,e,r){!function(n){n(function(n){var t=n("../state").inspect;return function(n){return n.prototype.inspect=function(){return t(n._handler(this))},n}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"../state":25}],16:[function(t,e,r){!function(n){n(function(){return function(n){function t(n,t,r,o){return e(function(t){return[t,n(t)]},t,r,o)}function e(n,t,o,i){function u(i,u){return r(o(i)).then(function(){return e(n,t,o,u)})}return r(i).then(function(e){return r(t(e)).then(function(t){return t?e:r(n(e)).spread(u)})})}var r=n.resolve;return n.iterate=t,n.unfold=e,n}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],17:[function(t,e,r){!function(n){n(function(){return function(n){return n.prototype.progress=function(n){return this.then(void 0,void 0,n)},n}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],18:[function(t,e,r){!function(n){n(function(n){function t(n,t,r,o){return e.setTimer(function(){n(r,o,t)},t)}var e=n("../env"),r=n("../TimeoutError");return function(n){function o(n,e,r){t(i,n,e,r)}function i(n,t){t.resolve(n)}function u(n,t,e){var o="undefined"==typeof n?new r("timed out after "+e+"ms"):n;t.reject(o)}return n.prototype.delay=function(n){var t=this._beget();return this._handler.fold(o,n,void 0,t._handler),t},n.prototype.timeout=function(n,r){var o=this._beget(),i=o._handler,c=t(u,n,r,o._handler);return this._handler.visit(i,function(n){e.clearTimer(c),this.resolve(n)},function(n){e.clearTimer(c),this.reject(n)},i.notify),o},n}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"../TimeoutError":10,"../env":21}],19:[function(t,e,r){!function(n){n(function(n){function t(n){throw n}function e(){}var r=n("../env").setTimer,o=n("../format");return function(n){function i(n){n.handled||(p.push(n),l("Potentially unhandled rejection ["+n.id+"] "+o.formatError(n.value)))}function u(n){var t=p.indexOf(n);t>=0&&(p.splice(t,1),s("Handled previous rejection ["+n.id+"] "+o.formatObject(n.value)))}function c(n,t){h.push(n,t),null===d&&(d=r(f,0))}function f(){for(d=null;h.length>0;)h.shift()(h.shift())}var a,l=e,s=e;"undefined"!=typeof console&&(a=console,l="undefined"!=typeof a.error?function(n){a.error(n)}:function(n){a.log(n)},s="undefined"!=typeof a.info?function(n){a.info(n)}:function(n){a.log(n)}),n.onPotentiallyUnhandledRejection=function(n){c(i,n)},n.onPotentiallyUnhandledRejectionHandled=function(n){c(u,n)},n.onFatalRejection=function(n){c(t,n.value)};var h=[],p=[],d=null;return n}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"../env":21,"../format":22}],20:[function(t,e,r){!function(n){n(function(){return function(n){return n.prototype["with"]=n.prototype.withThis=function(n){var t=this._beget(),e=t._handler;return e.receiver=n,this._handler.chain(e,n),t},n}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],21:[function(t,e,r){!function(n){n(function(n){var t=("undefined"!=typeof setTimeout&&setTimeout,function(n,t){return egret.setTimeout(n,window,t)}),e=function(n){return egret.clearTimeout(n)},r=function(n){return egret.setTimeout(n,window,0)};return{setTimer:t,clearTimer:e,asap:r}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{}],22:[function(t,e,r){!function(n){n(function(){function n(n){var e="object"==typeof n&&null!==n&&n.stack?n.stack:t(n);return n instanceof Error?e:e+" (WARNING: non-Error used)"}function t(n){var t=String(n);return"[object Object]"===t&&"undefined"!=typeof JSON&&(t=e(n,t)),t}function e(n,t){try{return JSON.stringify(n)}catch(e){return t}}return{formatError:n,formatObject:t,tryStringify:e}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],23:[function(t,e,r){!function(n){n(function(){function n(n,t,e){return n[e]=t,n}function t(n){return"function"==typeof n?n.bind():Object.create(n)}return function(e,r,o,i){return"undefined"==typeof r&&(r=n),Object.keys(i).reduce(function(n,t){var o=i[t];return"function"==typeof o?r(n,e(o),t):n},"undefined"==typeof o?t(i):o)}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],24:[function(t,e,r){!function(n){n(function(){return function(n){function t(n,t){this._handler=n===_?t:e(n)}function e(n){function t(n){o.resolve(n)}function e(n){o.reject(n)}function r(n){o.notify(n)}var o=new w;try{n(t,e,r)}catch(i){e(i)}return o}function r(n){return L(n)?n:new t(_,new j(v(n)))}function o(n){return new t(_,new j(new A(n)))}function i(){return $}function u(){return new t(_,new w)}function c(n,t){var e=new w(n.receiver,n.join().context);return new t(_,e)}function f(n){return l(G,null,n)}function a(n,t){return l(F,n,t)}function l(n,e,r){function o(t,o,u){u.resolved||s(r,i,t,n(e,o,t),u)}function i(n,t,e){l[n]=t,0===--a&&e.become(new k(l))}for(var u,c="function"==typeof e?o:i,f=new w,a=r.length>>>0,l=new Array(a),h=0;h<r.length&&!f.resolved;++h)u=r[h],void 0!==u||h in r?s(r,c,h,u,f):--a;return 0===a&&f.become(new k(l)),new t(_,f)}function s(n,t,e,r,o){if(S(r)){var i=m(r),u=i.state();0===u?i.fold(t,e,void 0,o):u>0?t(e,i.value,o):(o.become(i),h(n,e+1,i))}else t(e,r,o)}function h(n,t,e){for(var r=t;r<n.length;++r)p(v(n[r]),e)}function p(n,t){if(n!==t){var e=n.state();0===e?n.visit(n,void 0,n._unreport):0>e&&n._unreport()}}function d(n){return"object"!=typeof n||null===n?o(new TypeError("non-iterable passed to race()")):0===n.length?i():1===n.length?r(n[0]):y(n)}function y(n){var e,r,o,i=new w;for(e=0;e<n.length;++e)if(r=n[e],void 0!==r||e in n){if(o=v(r),0!==o.state()){i.become(o),h(n,e+1,o);break}o.visit(i,i.resolve,i.reject)}return new t(_,i)}function v(n){return L(n)?n._handler.join():S(n)?g(n):new k(n)}function m(n){return L(n)?n._handler.join():g(n)}function g(n){try{var t=n.then;return"function"==typeof t?new x(t,n):new k(n)}catch(e){return new A(e)}}function _(){}function b(){}function w(n,e){t.createContext(this,e),this.consumers=void 0,this.receiver=n,this.handler=void 0,this.resolved=!1}function j(n){this.handler=n}function x(n,t){w.call(this),B.enqueue(new C(n,t,this))}function k(n){t.createContext(this),this.value=n}function A(n){t.createContext(this),this.id=++Y,this.value=n,this.handled=!1,this.reported=!1,this._report()}function E(n,t){this.rejection=n,this.context=t}function R(n){this.rejection=n}function T(){return new A(new TypeError("Promise cycle"))}function q(n,t){this.continuation=n,this.handler=t}function P(n,t){this.handler=t,this.value=n}function C(n,t,e){this._then=n,this.thenable=t,this.resolver=e}function O(n,t,e,r,o){try{n.call(t,e,r,o)}catch(i){r(i)}}function Q(n,t,e,r){this.f=n,this.z=t,this.c=e,this.to=r,this.resolver=X,this.receiver=this}function L(n){return n instanceof t}function S(n){return("object"==typeof n||"function"==typeof n)&&null!==n}function U(n,e,r,o){return"function"!=typeof n?o.become(e):(t.enterContext(e),M(n,e.value,r,o),void t.exitContext())}function N(n,e,r,o,i){return"function"!=typeof n?i.become(r):(t.enterContext(r),z(n,e,r.value,o,i),void t.exitContext())}function H(n,e,r,o,i){return"function"!=typeof n?i.notify(e):(t.enterContext(r),D(n,e,o,i),void t.exitContext())}function F(n,t,e){try{return n(t,e)}catch(r){return o(r)}}function M(n,t,e,r){try{r.become(v(n.call(e,t)))}catch(o){r.become(new A(o))}}function z(n,t,e,r,o){try{n.call(r,t,e,o)}catch(i){o.become(new A(i))}}function D(n,t,e,r){try{r.notify(n.call(e,t))}catch(o){r.notify(o)}}function J(n,t){t.prototype=V(n.prototype),t.prototype.constructor=t}function G(n,t){return t}function I(){}function W(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.emit?function(n,t){return"unhandledRejection"===n?process.emit(n,t.value,t):process.emit(n,t)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(n,t,e){var r=!1;try{var o=new e("unhandledRejection");r=o instanceof e}catch(i){}return r?function(n,r){var o=new e(n,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!t.dispatchEvent(o)}:n}(I,self,CustomEvent):I}var B=n.scheduler,K=W(),V=Object.create||function(n){function t(){}return t.prototype=n,new t};t.resolve=r,t.reject=o,t.never=i,t._defer=u,t._handler=v,t.prototype.then=function(n,t,e){var r=this._handler,o=r.join().state();if("function"!=typeof n&&o>0||"function"!=typeof t&&0>o)return new this.constructor(_,r);var i=this._beget(),u=i._handler;return r.chain(u,r.receiver,n,t,e),i},t.prototype["catch"]=function(n){return this.then(void 0,n)},t.prototype._beget=function(){return c(this._handler,this.constructor)},t.all=f,t.race=d,t._traverse=a,t._visitRemaining=h,_.prototype.when=_.prototype.become=_.prototype.notify=_.prototype.fail=_.prototype._unreport=_.prototype._report=I,_.prototype._state=0,_.prototype.state=function(){return this._state},_.prototype.join=function(){for(var n=this;void 0!==n.handler;)n=n.handler;return n},_.prototype.chain=function(n,t,e,r,o){this.when({resolver:n,receiver:t,fulfilled:e,rejected:r,progress:o})},_.prototype.visit=function(n,t,e,r){this.chain(X,n,t,e,r)},_.prototype.fold=function(n,t,e,r){this.when(new Q(n,t,e,r))},J(_,b),b.prototype.become=function(n){n.fail()};var X=new b;J(_,w),w.prototype._state=0,w.prototype.resolve=function(n){this.become(v(n))},w.prototype.reject=function(n){this.resolved||this.become(new A(n))},w.prototype.join=function(){if(!this.resolved)return this;for(var n=this;void 0!==n.handler;)if(n=n.handler,n===this)return this.handler=T();return n},w.prototype.run=function(){var n=this.consumers,t=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var e=0;e<n.length;++e)t.when(n[e])},w.prototype.become=function(n){this.resolved||(this.resolved=!0,this.handler=n,void 0!==this.consumers&&B.enqueue(this),void 0!==this.context&&n._report(this.context))},w.prototype.when=function(n){this.resolved?B.enqueue(new q(n,this.handler)):void 0===this.consumers?this.consumers=[n]:this.consumers.push(n)},w.prototype.notify=function(n){this.resolved||B.enqueue(new P(n,this))},w.prototype.fail=function(n){var t="undefined"==typeof n?this.context:n;this.resolved&&this.handler.join().fail(t)},w.prototype._report=function(n){this.resolved&&this.handler.join()._report(n)},w.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},J(_,j),j.prototype.when=function(n){B.enqueue(new q(n,this))},j.prototype._report=function(n){this.join()._report(n)},j.prototype._unreport=function(){this.join()._unreport()},J(w,x),J(_,k),k.prototype._state=1,k.prototype.fold=function(n,t,e,r){N(n,t,this,e,r)},k.prototype.when=function(n){U(n.fulfilled,this,n.receiver,n.resolver)};var Y=0;J(_,A),A.prototype._state=-1,A.prototype.fold=function(n,t,e,r){r.become(this)},A.prototype.when=function(n){"function"==typeof n.rejected&&this._unreport(),U(n.rejected,this,n.receiver,n.resolver)},A.prototype._report=function(n){B.afterQueue(new E(this,n))},A.prototype._unreport=function(){this.handled||(this.handled=!0,B.afterQueue(new R(this)))},A.prototype.fail=function(n){this.reported=!0,K("unhandledRejection",this),t.onFatalRejection(this,void 0===n?this.context:n)},E.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,K("unhandledRejection",this.rejection)||t.onPotentiallyUnhandledRejection(this.rejection,this.context))},R.prototype.run=function(){this.rejection.reported&&(K("rejectionHandled",this.rejection)||t.onPotentiallyUnhandledRejectionHandled(this.rejection))},t.createContext=t.enterContext=t.exitContext=t.onPotentiallyUnhandledRejection=t.onPotentiallyUnhandledRejectionHandled=t.onFatalRejection=I;var Z=new _,$=new t(_,Z);return q.prototype.run=function(){this.handler.join().when(this.continuation)},P.prototype.run=function(){var n=this.handler.consumers;if(void 0!==n)for(var t,e=0;e<n.length;++e)t=n[e],H(t.progress,this.value,this.handler,t.receiver,t.resolver)},C.prototype.run=function(){function n(n){r.resolve(n)}function t(n){r.reject(n)}function e(n){r.notify(n)}var r=this.resolver;O(this._then,this.thenable,n,t,e)},Q.prototype.fulfilled=function(n){this.f.call(this.c,this.z,n,this.to)},Q.prototype.rejected=function(n){this.to.reject(n)},Q.prototype.progress=function(n){this.to.notify(n)},t}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],25:[function(t,e,r){!function(n){n(function(){function n(){return{state:"pending"}}function t(n){return{state:"rejected",reason:n}}function e(n){return{state:"fulfilled",value:n}}function r(r){var o=r.state();return 0===o?n():o>0?e(r.value):t(r.value)}return{pending:n,fulfilled:e,rejected:t,inspect:r}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n()})},{}],26:[function(t,e,r){!function(n){n(function(n){function t(n,t){return p(n,this,t||[])}function e(n,t,e,r){var o=u(r);try{switch(e.length){case 2:n.call(t,e[0],e[1],o);break;case 1:n.call(t,e[0],o);break;case 0:n.call(t,o);break;default:e.push(o),n.apply(t,e)}}catch(i){r.reject(i)}}function r(n){return p(n,this,h.call(arguments,1))}function o(n){var t=arguments.length>1?h.call(arguments,1):[];return function(){var e,r=t.length,o=arguments.length,i=new Array(o+r);for(e=0;r>e;++e)i[e]=t[e];for(e=0;o>e;++e)i[e+r]=arguments[e];return p(n,this,i)}}function i(n,t,e){return l(o,t,e,n)}function u(n){return function(t,e){t?n.reject(t):arguments.length>2?n.resolve(h.call(arguments,1)):n.resolve(e)}}function c(n,t){function e(n){r(null,n)}function r(n,e){s(function(){t(n,e)},0)}return n=a(n),t&&n.then(e,r),n}function f(n){return function(t){return c(t,n)}}var a=n("./when"),l=n("./lib/liftAll"),s=n("./lib/env").setTimer,h=Array.prototype.slice,p=n("./lib/apply")(a.Promise,e);return{lift:o,liftAll:i,apply:t,call:r,createCallback:u,bindCallback:c,liftCallback:f}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./lib/apply":11,"./lib/env":21,"./lib/liftAll":23,"./when":32}],27:[function(t,e,r){!function(n){n(function(n){var t=n("./when"),e=t.Promise.all,r=Array.prototype.slice;return function(n){return e(r.call(arguments,1)).then(function(e){return t.map(n,function(n){return n.apply(void 0,e)})})}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./when":32}],28:[function(t,e,r){!function(n){n(function(n){var t=n("./when"),e=t.Promise.all,r=Array.prototype.slice;return function(n){var o=function(n,t){return o=function(n,t){return t(n)},t.apply(null,n)};return e(r.call(arguments,1)).then(function(e){return t.reduce(n,function(n,t){return o(n,t)},e)})}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./when":32}],29:[function(t,e,r){!function(n){n(function(n){var t=n("./when"),e=t["try"],r=n("./cancelable");return function(n,o,i,u){function c(n){l.resolve(n)}function f(n){e(o).then(a,h),void 0!==n&&l.notify(n)}function a(){s||t(n(),function(n){t(i(n),function(t){return t?c(n):f(n)},function(){f(n)})},h)}var l,s,h;return s=!1,l=r(t.defer(),function(){s=!0}),h=l.reject,i=i||function(){return!1},"function"!=typeof o&&(o=function(n){return function(){return t().delay(n)}}(o)),u?f():a(),l.promise=Object.create(l.promise),l.promise.cancel=l.cancel,l.promise}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./cancelable":3,"./when":32}],30:[function(t,e,r){!function(n){n(function(n){var t=n("./when"),e=t.Promise.all,r=Array.prototype.slice;return function(n){function o(n){return i.push(n),i}var i=[];return e(r.call(arguments,1)).then(function(e){return t.reduce(n,function(n,r){return t(r.apply(void 0,e),o)},i)})}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./when":32}],31:[function(t,e,r){!function(n){n(function(n){var t=n("./when");return function(n,e){return t(e).timeout(n)}})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./when":32}],32:[function(t,e,r){!function(n){n(function(n){function t(n,t,e,r){var o=x.resolve(n);return arguments.length<2?o:o.then(t,e,r)}function e(n){return new x(n)}function r(n){return function(){for(var t=0,e=arguments.length,r=new Array(e);e>t;++t)r[t]=arguments[t];return k(n,this,r)}}function o(n){for(var t=0,e=arguments.length-1,r=new Array(e);e>t;++t)r[t]=arguments[t+1];return k(n,this,r)}function i(){return new u}function u(){function n(n){r._handler.resolve(n)}function t(n){r._handler.reject(n)}function e(n){r._handler.notify(n)}var r=x._defer();this.promise=r,this.resolve=n,this.reject=t,this.notify=e,this.resolver={resolve:n,reject:t,notify:e}}function c(n){return n&&"function"==typeof n.then}function f(){return x.all(arguments)}function a(n){return t(n,x.all)}function l(n){return t(n,x.settle)}function s(n,e){return t(n,function(n){return x.map(n,e)})}function h(n,e){return t(n,function(n){return x.filter(n,e)})}var p=n("./lib/decorators/timed"),d=n("./lib/decorators/array"),y=n("./lib/decorators/flow"),v=n("./lib/decorators/fold"),m=n("./lib/decorators/inspect"),g=n("./lib/decorators/iterate"),_=n("./lib/decorators/progress"),b=n("./lib/decorators/with"),w=n("./lib/decorators/unhandledRejection"),j=n("./lib/TimeoutError"),x=[d,y,v,g,_,m,b,p,w].reduce(function(n,t){return t(n)},n("./lib/Promise")),k=n("./lib/apply")(x);return t.promise=e,t.resolve=x.resolve,t.reject=x.reject,t.lift=r,t["try"]=o,t.attempt=o,t.iterate=x.iterate,t.unfold=x.unfold,t.join=f,t.all=a,t.settle=l,t.any=r(x.any),t.some=r(x.some),t.race=r(x.race),t.map=s,t.filter=h,t.reduce=r(x.reduce),t.reduceRight=r(x.reduceRight),t.isPromiseLike=c,t.Promise=x,t.defer=i,t.TimeoutError=j,t})}("function"==typeof n&&n.amd?n:function(n){e.exports=n(t)})},{"./lib/Promise":8,"./lib/TimeoutError":10,"./lib/apply":11,"./lib/decorators/array":12,"./lib/decorators/flow":13,"./lib/decorators/fold":14,"./lib/decorators/inspect":15,"./lib/decorators/iterate":16,"./lib/decorators/progress":17,"./lib/decorators/timed":18,"./lib/decorators/unhandledRejection":19,"./lib/decorators/with":20}]},{},[1])(1)});