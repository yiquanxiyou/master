(function(f){var u = this;u.when = f();})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(g,h,f){var e=h.exports=g("../when");e.callbacks=g("../callbacks");e.cancelable=g("../cancelable");e.delay=g("../delay");e.fn=g("../function");e.guard=g("../guard");e.keys=g("../keys");e.nodefn=e.node=g("../node");e.parallel=g("../parallel");e.pipeline=g("../pipeline");e.poll=g("../poll");e.sequence=g("../sequence");e.timeout=g("../timeout")},{"../callbacks":2,"../cancelable":3,"../delay":4,"../function":5,"../guard":6,"../keys":7,"../node":26,"../parallel":27,"../pipeline":28,"../poll":29,"../sequence":30,"../timeout":31,"../when":32}],2:[function(f,g,e){(function(h){h(function(m){var u=m("./when");var v=u.Promise;var r=m("./lib/liftAll");var w=Array.prototype.slice;var n=m("./lib/apply");var i=n(v,s);return{lift:j,liftAll:t,apply:x,call:y,promisify:q};function x(z,A){return i(z,this,A||[])}function s(C,z,A,B){A.push(k(B.resolve,B),k(B.reject,B));o(C,z,A,B)}function o(B,z,A,D){try{B.apply(z,A)}catch(C){D.reject(C)}}function y(z){return i(z,this,w.call(arguments,1))}function j(A){var z=arguments.length>1?w.call(arguments,1):[];return function(){return i(A,this,z.concat(w.call(arguments)))}}function t(A,z,B){return r(j,z,B,A)}function q(A,z){return function(){var B=this;return v.all(arguments).then(function(C){var F=v._defer();var E,D;if(typeof z.callback==="number"){E=l(C,z.callback)}if(typeof z.errback==="number"){D=l(C,z.errback)}if(D<E){p(C,D,F._handler.reject,F._handler);p(C,E,F._handler.resolve,F._handler)}else{p(C,E,F._handler.resolve,F._handler);p(C,D,F._handler.reject,F._handler)}A.apply(B,C);return F})}}function l(z,A){return A<0?(z.length+A+2):A}function p(A,C,B,z){if(typeof C==="number"){A.splice(C,0,k(B,z))}}function k(A,z){return function(){if(arguments.length>1){A.call(z,w.call(arguments))}else{A.apply(z,arguments)}}}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./lib/apply":11,"./lib/liftAll":23,"./when":32}],3:[function(f,g,e){(function(h){h(function(){return function(i,j){i.cancel=function(){try{i.reject(j(i))}catch(k){i.reject(k)}return i.promise};return i}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h()})},{}],4:[function(f,g,e){(function(h){h(function(k){var i=k("./when");return function j(m,l){return i(l).delay(m)}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./when":32}],5:[function(f,g,e){(function(h){h(function(k){var o=k("./when");var l=o["try"];var m=k("./lib/liftAll");var i=k("./lib/apply")(o.Promise);var q=Array.prototype.slice;return{lift:j,liftAll:n,call:l,apply:r,compose:p};function r(t,s){return i(t,this,s==null?[]:q.call(s))}function j(t){var s=arguments.length>1?q.call(arguments,1):[];return function(){return i(t,this,s.concat(q.call(arguments)))}}function n(t,s,u){return m(j,s,u,t)}function p(t){var s=q.call(arguments,1);return function(){var u=this;var v=q.call(arguments);var w=l.apply(u,[t].concat(v));return o.reduce(s,function(x,y){return y.call(u,x)},w)}}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./lib/apply":11,"./lib/liftAll":23,"./when":32}],6:[function(f,g,e){(function(h){h(function(j){var i=j("./when");var l=Array.prototype.slice;k.n=m;return k;function k(o,n){return function(){var p=l.call(arguments);return i(o()).withThis(this).then(function(q){return i(n.apply(this,p))["finally"](q)})}}function m(q){var o=0;var r=[];return function p(){return i.promise(function(s){if(o<q){s(n)}else{r.push(s)}o+=1})};function n(){o=Math.max(o-1,0);if(r.length>0){r.shift()(n)}}}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)}))},{"./when":32}],7:[function(f,g,e){(function(h){h(function(j){var i=j("./when");var l=i.Promise;var n=i.resolve;return{all:i.lift(k),map:m};function k(t){var q=l._defer();var s=l._handler(q);var v={};var x=Object.keys(t);var o=x.length;for(var w=0,u;w<x.length;++w){u=x[w];l._handler(t[u]).fold(r,u,v,s)}if(o===0){s.resolve(v)}return q;function r(y,p,z){this[y]=p;if(--o===0){z.resolve(v)}}}function m(p,q){return n(p).then(function(r){return k(Object.keys(r).reduce(function(t,s){t[s]=n(r[s]).fold(o,s);return t},{}))});function o(s,r){return q(r,s)}}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./when":32}],8:[function(f,g,e){(function(h){h(function(i){var l=i("./makePromise");var j=i("./Scheduler");var k=i("./env").asap;return l({scheduler:new j(k)})})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./Scheduler":9,"./env":21,"./makePromise":24}],9:[function(f,g,e){(function(h){h(function(){function i(k){this._async=k;this._running=false;this._queue=this;this._queueLen=0;this._afterQueue={};this._afterQueueLen=0;var j=this;this.drain=function(){j._drain()}}i.prototype.enqueue=function(j){this._queue[this._queueLen++]=j;this.run()};i.prototype.afterQueue=function(j){this._afterQueue[this._afterQueueLen++]=j;this.run()};i.prototype.run=function(){if(!this._running){this._running=true;this._async(this.drain)}};i.prototype._drain=function(){var j=0;for(;j<this._queueLen;++j){this._queue[j].run();this._queue[j]=void 0}this._queueLen=0;this._running=false;for(j=0;j<this._afterQueueLen;++j){this._afterQueue[j].run();this._afterQueue[j]=void 0}this._afterQueueLen=0};return i})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],10:[function(f,g,e){(function(h){h(function(){function i(j){Error.call(this);this.message=j;this.name=i.name;if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,i)}}i.prototype=Object.create(Error.prototype);i.prototype.constructor=i;return i})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],11:[function(f,g,e){(function(h){h(function(){i.tryCatchResolve=j;return i;function i(o,n){if(arguments.length<2){n=j}return l;function l(t,r,s){var u=o._defer();var q=s.length;var v=new Array(q);k({f:t,thisArg:r,args:s,params:v,i:q-1,call:n},u._handler);return u}function k(r,q){if(r.i<0){return n(r.f,r.thisArg,r.params,q)}var p=o._handler(r.args[r.i]);p.fold(m,r,void 0,q)}function m(r,p,q){r.params[r.i]=p;r.i-=1;k(r,q)}}function j(m,k,l,o){try{o.resolve(m.apply(k,l))}catch(n){o.reject(n)}}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],12:[function(f,g,e){(function(h){h(function(j){var k=j("../state");var i=j("../apply");return function l(y){var r=i(y);var o=y.resolve;var B=y.all;var s=Array.prototype.reduce;var u=Array.prototype.reduceRight;var A=Array.prototype.slice;y.any=v;y.some=z;y.settle=t;y.map=n;y.filter=p;y.reduce=x;y.reduceRight=q;y.prototype.spread=function(D){return this.then(B).then(function(E){return D.apply(this,E)})};return y;function v(L){var E=y._defer();var F=E._handler;var G=L.length>>>0;var D=G;var N=[];for(var J,M,I=0;I<G;++I){M=L[I];if(M===void 0&&!(I in L)){--D;continue}J=y._handler(M);if(J.state()>0){F.become(J);y._visitRemaining(L,I,J);break}else{J.visit(F,H,K)}}if(D===0){F.reject(new RangeError("any(): array must not be empty"))}return E;function H(O){N=null;this.resolve(O)}function K(O){if(this.resolved){return}N.push(O);if(--D===0){this.reject(N)}}}function z(M,E){var D=y._defer();var F=D._handler;var I=[];var O=[];var G=M.length>>>0;var J=0;var N;var L,H;for(H=0;H<G;++H){L=M[H];if(L===void 0&&!(H in M)){continue}++J}E=Math.max(E,0);N=(J-E+1);J=Math.min(E,J);if(E>J){F.reject(new RangeError("some(): array must contain at least "+E+" item(s), but had "+J))}else{if(J===0){F.resolve(I)}}for(H=0;H<G;++H){L=M[H];if(L===void 0&&!(H in M)){continue}y._handler(L).visit(F,K,P,F.notify)}return D;function K(Q){if(this.resolved){return}I.push(Q);if(--J===0){O=null;this.resolve(I)}}function P(Q){if(this.resolved){return}O.push(Q);if(--N===0){I=null;this.reject(O)}}}function n(D,E){return y._traverse(E,D)}function p(F,D){var E=A.call(F);return y._traverse(D,E).then(function(G){return m(E,G)})}function m(I,E){var D=E.length;var G=new Array(D);for(var H=0,F=0;H<D;++H){if(E[H]){G[F++]=y._handler(I[H]).value}}G.length=F;return G}function t(D){return B(D.map(C))}function C(E){var D=y._handler(E);if(D.state()===0){return o(E).then(k.fulfilled,k.rejected)}D._unreport();return k.inspect(D)}function x(D,E){return arguments.length>2?s.call(D,w(E),arguments[2]):s.call(D,w(E))}function q(D,E){return arguments.length>2?u.call(D,w(E),arguments[2]):u.call(D,w(E))}function w(D){return function(G,E,F){return r(D,void 0,[G,E,F])}}}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)}))},{"../apply":11,"../state":25}],13:[function(f,g,e){(function(h){h(function(){return function j(t){var s=t.resolve;var r=t.reject;var p=t.prototype["catch"];t.prototype.done=function(v,w){this._handler.visit(this._handler.receiver,v,w)};t.prototype["catch"]=t.prototype.otherwise=function(v){if(arguments.length<2){return p.call(this,v)}if(typeof v!=="function"){return this.ensure(l)}return p.call(this,q(arguments[1],v))};function q(w,v){return function(x){return k(x,v)?w.call(this,x):r(x)}}t.prototype["finally"]=t.prototype.ensure=function(v){if(typeof v!=="function"){return this}return this.then(function(w){return o(v,this,i,w)},function(w){return o(v,this,r,w)})};function o(y,x,w,z){var v=y.call(x);return n(v)?u(v,w,z):w(z)}function u(y,w,v){return s(y).then(function(){return w(v)})}t.prototype["else"]=t.prototype.orElse=function(v){return this.then(void 0,function(){return v})};t.prototype.yield=function(v){return this.then(function(){return v})};t.prototype.tap=function(v){return this.then(v)["yield"](this)};return t};function l(){throw new TypeError("catch predicate must be a function")}function k(p,o){return m(o)?p instanceof o:o(p)}function m(o){return o===Error||(o!=null&&o.prototype instanceof Error)}function n(o){return(typeof o==="object"||typeof o==="function")&&o!==null}function i(o){return o}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],14:[function(f,g,e){(function(h){h(function(){return function i(j){j.prototype.fold=function(k,m){var l=this._beget();this._handler.fold(function(o,n,p){j._handler(o).fold(function(q,r,s){s.resolve(k.call(this,r,q))},n,this,p)},m,l._handler.receiver,l._handler);return l};return j}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],15:[function(f,g,e){(function(h){h(function(j){var k=j("../state").inspect;return function i(l){l.prototype.inspect=function(){return k(l._handler(this))};return l}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)}))},{"../state":25}],16:[function(f,g,e){(function(h){h(function(){return function i(l){var k=l.resolve;l.iterate=j;l.unfold=m;return l;function j(p,q,o,n){return m(function(r){return[r,p(r)]},q,o,n)}function m(o,r,q,n){return k(n).then(function(s){return k(r(s)).then(function(t){return t?s:k(o(s)).spread(p)})});function p(s,t){return k(q(s)).then(function(){return m(o,r,q,t)})}}}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],17:[function(f,g,e){(function(h){h(function(){return function i(j){j.prototype.progress=function(k){return this.then(void 0,void 0,k)};return j}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],18:[function(f,g,e){(function(h){h(function(j){var k=j("../env");var m=j("../TimeoutError");function l(p,o,n,q){return k.setTimer(function(){p(n,q,o)},o)}return function i(o){o.prototype.delay=function(r){var s=this._beget();this._handler.fold(q,r,void 0,s._handler);return s};function q(s,r,t){l(n,s,r,t)}function n(r,s){s.resolve(r)}o.prototype.timeout=function(r,x){var w=this._beget();var u=w._handler;var s=l(p,r,x,w._handler);this._handler.visit(u,function v(t){k.clearTimer(s);this.resolve(t)},function y(t){k.clearTimer(s);this.reject(t)},u.notify);return w};function p(u,s,r){var t=typeof u==="undefined"?new m("timed out after "+r+"ms"):u;s.reject(t)}return o}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)}))},{"../TimeoutError":10,"../env":21}],19:[function(f,g,e){(function(h){h(function(k){var j=k("../env").setTimer;var n=k("../format");return function i(t){var v=l;var p=l;var u;if(typeof console!=="undefined"){u=console;v=typeof u.error!=="undefined"?function(z){u.error(z)}:function(z){u.log(z)};p=typeof u.info!=="undefined"?function(z){u.info(z)}:function(z){u.log(z)}}t.onPotentiallyUnhandledRejection=function(z){o(r,z)};t.onPotentiallyUnhandledRejectionHandled=function(z){o(x,z)};t.onFatalRejection=function(z){o(m,z.value)};var q=[];var y=[];var s=null;function r(z){if(!z.handled){y.push(z);v("Potentially unhandled rejection ["+z.id+"] "+n.formatError(z.value))}}function x(A){var z=y.indexOf(A);if(z>=0){y.splice(z,1);p("Handled previous rejection ["+A.id+"] "+n.formatObject(A.value))}}function o(A,z){q.push(A,z);if(s===null){s=j(w,0)}}function w(){s=null;while(q.length>0){q.shift()(q.shift())}}return t};function m(o){throw o}function l(){}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)}))},{"../env":21,"../format":22}],20:[function(f,g,e){(function(h){h(function(){return function i(j){j.prototype["with"]=j.prototype.withThis=function(k){var l=this._beget();var m=l._handler;m.receiver=k;this._handler.chain(m,k);return l};return j}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],21:[function(f,g,e){(function(h){h(function(k){var o;var j=typeof setTimeout!=="undefined"&&setTimeout;var n=function(u,t){return egret.setTimeout(u,window,t)};var p=function(u){return egret.clearTimeout(u)};var i=function(t){return egret.setTimeout(t,window,0)};return{setTimer:n,clearTimer:p,asap:i};function r(){return typeof process!=="undefined"&&Object.prototype.toString.call(process)==="[object process]"}function s(){return(typeof MutationObserver==="function"&&MutationObserver)||(typeof WebKitMutationObserver==="function"&&WebKitMutationObserver)}function q(v){var w;var u=document.createTextNode("");var y=new v(x);y.observe(u,{characterData:true});function x(){var z=w;w=void 0;z()}var t=0;return function(z){w=z;u.data=(t^=1)}}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)}))},{}],22:[function(f,g,e){(function(h){h(function(){return{formatError:j,formatObject:i,tryStringify:k};function j(m){var l=typeof m==="object"&&m!==null&&m.stack?m.stack:i(m);return m instanceof Error?l:l+" (WARNING: non-Error used)"}function i(m){var l=String(m);if(l==="[object Object]"&&typeof JSON!=="undefined"){l=k(m,l)}return l}function k(l,m){try{return JSON.stringify(l)}catch(n){return m}}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],23:[function(f,g,e){(function(h){h(function(){return function j(l,n,o,m){if(typeof n==="undefined"){n=k}return Object.keys(m).reduce(function(r,p){var q=m[p];return typeof q==="function"?n(r,l(q),p):r},typeof o==="undefined"?i(m):o)};function k(n,m,l){n[l]=m;return n}function i(l){return typeof l==="function"?l.bind():Object.create(l)}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],24:[function(f,g,e){(function(h){h(function(){return function i(ac){var R=ac.scheduler;var U=N();var A=Object.create||function(am){function al(){}al.prototype=am;return new al()};function S(am,al){this._handler=am===K?al:ad(am)}function ad(aq){var am=new r();try{aq(al,ap,an)}catch(ao){ap(ao)}return am;function al(ar){am.resolve(ar)}function ap(ar){am.reject(ar)}function an(ar){am.notify(ar)}}S.resolve=E;S.reject=I;S.never=L;S._defer=q;S._handler=j;function E(al){return B(al)?al:new S(K,new H(j(al)))}function I(al){return new S(K,new H(new ag(al)))}function L(){return p}function q(){return new S(K,new r())}S.prototype.then=function(aq,al,ap){var am=this._handler;var an=am.join().state();if((typeof aq!=="function"&&an>0)||(typeof al!=="function"&&an<0)){return new this.constructor(K,am)}var ao=this._beget();var ar=ao._handler;am.chain(ar,am.receiver,aq,al,ap);return ao};S.prototype["catch"]=function(al){return this.then(void 0,al)};S.prototype._beget=function(){return F(this._handler,this.constructor)};function F(al,am){var an=new r(al.receiver,al.join().context);return new am(K,an)}S.all=C;S.race=t;S._traverse=aa;function C(al){return u(W,null,al)}function aa(am,al){return u(y,am,al)}function u(am,aq,au){var aw=typeof aq==="function"?av:ar;var an=new r();var al=au.length>>>0;var ao=new Array(al);for(var ap=0,at;ap<au.length&&!an.resolved;++ap){at=au[ap];if(at===void 0&&!(ap in au)){--al;continue}M(au,aw,ap,at,an)}if(al===0){an.become(new aj(ao))}return new S(K,an);function av(ay,ax,az){if(!az.resolved){M(au,ar,ay,am(aq,ax,ay),az)}}function ar(ay,ax,az){ao[ay]=ax;if(--al===0){az.become(new aj(ao))}}}function M(an,aq,am,al,ar){if(af(al)){var ap=z(al);var ao=ap.state();if(ao===0){ap.fold(aq,am,void 0,ar)}else{if(ao>0){aq(am,ap.value,ar)}else{ar.become(ap);l(an,am+1,ap)}}}else{aq(am,al,ar)}}S._visitRemaining=l;function l(am,ao,an){for(var al=ao;al<am.length;++al){n(j(am[al]),an)}}function n(an,am){if(an===am){return}var al=an.state();if(al===0){an.visit(an,void 0,an._unreport)}else{if(al<0){an._unreport()}}}function t(al){if(typeof al!=="object"||al===null){return I(new TypeError("non-iterable passed to race()"))}return al.length===0?L():al.length===1?E(al[0]):Q(al)}function Q(an){var ap=new r();var am,al,ao;for(am=0;am<an.length;++am){al=an[am];if(al===void 0&&!(am in an)){continue}ao=j(al);if(ao.state()!==0){ap.become(ao);l(an,am+1,ao);break}else{ao.visit(ap,ap.resolve,ap.reject)}}return new S(K,ap)}function j(al){if(B(al)){return al._handler.join()}return af(al)?P(al):new aj(al)}function z(al){return B(al)?al._handler.join():P(al)}function P(am){try{var al=am.then;return typeof al==="function"?new m(al,am):new aj(am)}catch(an){return new ag(an)}}function K(){}K.prototype.when=K.prototype.become=K.prototype.notify=K.prototype.fail=K.prototype._unreport=K.prototype._report=ae;K.prototype._state=0;K.prototype.state=function(){return this._state};K.prototype.join=function(){var al=this;while(al.handler!==void 0){al=al.handler}return al};K.prototype.chain=function(ap,ao,al,an,am){this.when({resolver:ap,receiver:ao,fulfilled:al,rejected:an,progress:am})};K.prototype.visit=function(ao,al,an,am){this.chain(T,ao,al,an,am)};K.prototype.fold=function(al,am,ao,an){this.when(new O(al,am,ao,an))};function x(){}w(K,x);x.prototype.become=function(al){al.fail()};var T=new x();function r(al,am){S.createContext(this,am);this.consumers=void 0;this.receiver=al;this.handler=void 0;this.resolved=false}w(K,r);r.prototype._state=0;r.prototype.resolve=function(al){this.become(j(al))};r.prototype.reject=function(al){if(this.resolved){return}this.become(new ag(al))};r.prototype.join=function(){if(!this.resolved){return this}var al=this;while(al.handler!==void 0){al=al.handler;if(al===this){return this.handler=ab()}}return al};r.prototype.run=function(){var an=this.consumers;var am=this.handler;this.handler=this.handler.join();this.consumers=void 0;for(var al=0;al<an.length;++al){am.when(an[al])}};r.prototype.become=function(al){if(this.resolved){return}this.resolved=true;this.handler=al;if(this.consumers!==void 0){R.enqueue(this)}if(this.context!==void 0){al._report(this.context)}};r.prototype.when=function(al){if(this.resolved){R.enqueue(new s(al,this.handler))}else{if(this.consumers===void 0){this.consumers=[al]}else{this.consumers.push(al)}}};r.prototype.notify=function(al){if(!this.resolved){R.enqueue(new G(al,this))}};r.prototype.fail=function(al){var am=typeof al==="undefined"?this.context:al;this.resolved&&this.handler.join().fail(am)};r.prototype._report=function(al){this.resolved&&this.handler.join()._report(al)};r.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()};function H(al){this.handler=al}w(K,H);H.prototype.when=function(al){R.enqueue(new s(al,this))};H.prototype._report=function(al){this.join()._report(al)};H.prototype._unreport=function(){this.join()._unreport()};function m(am,al){r.call(this);R.enqueue(new X(am,al,this))}w(r,m);function aj(al){S.createContext(this);this.value=al}w(K,aj);aj.prototype._state=1;aj.prototype.fold=function(al,am,ao,an){ak(al,am,this,ao,an)};aj.prototype.when=function(al){k(al.fulfilled,this,al.receiver,al.resolver)};var D=0;function ag(al){S.createContext(this);this.id=++D;this.value=al;this.handled=false;this.reported=false;this._report()}w(K,ag);ag.prototype._state=-1;ag.prototype.fold=function(al,am,ao,an){an.become(this)};ag.prototype.when=function(al){if(typeof al.rejected==="function"){this._unreport()}k(al.rejected,this,al.receiver,al.resolver)};ag.prototype._report=function(al){R.afterQueue(new Z(this,al))};ag.prototype._unreport=function(){if(this.handled){return}this.handled=true;R.afterQueue(new v(this))};ag.prototype.fail=function(al){this.reported=true;U("unhandledRejection",this);S.onFatalRejection(this,al===void 0?this.context:al)};function Z(al,am){this.rejection=al;this.context=am}Z.prototype.run=function(){if(!this.rejection.handled&&!this.rejection.reported){this.rejection.reported=true;U("unhandledRejection",this.rejection)||S.onPotentiallyUnhandledRejection(this.rejection,this.context)}};function v(al){this.rejection=al}v.prototype.run=function(){if(this.rejection.reported){U("rejectionHandled",this.rejection)||S.onPotentiallyUnhandledRejectionHandled(this.rejection)}};S.createContext=S.enterContext=S.exitContext=S.onPotentiallyUnhandledRejection=S.onPotentiallyUnhandledRejectionHandled=S.onFatalRejection=ae;var ai=new K();var p=new S(K,ai);function ab(){return new ag(new TypeError("Promise cycle"))}function s(al,am){this.continuation=al;this.handler=am}s.prototype.run=function(){this.handler.join().when(this.continuation)};function G(am,al){this.handler=al;this.value=am}G.prototype.run=function(){var am=this.handler.consumers;if(am===void 0){return}for(var an,al=0;al<am.length;++al){an=am[al];Y(an.progress,this.value,this.handler,an.receiver,an.resolver)}};function X(an,al,am){this._then=an;this.thenable=al;this.resolver=am}X.prototype.run=function(){var an=this.resolver;o(this._then,this.thenable,am,al,ao);function am(ap){an.resolve(ap)}function al(ap){an.reject(ap)}function ao(ap){an.notify(ap)}};function o(aq,al,ao,an,am){try{aq.call(al,ao,an,am)}catch(ap){an(ap)}}function O(al,am,ao,an){this.f=al;this.z=am;this.c=ao;this.to=an;this.resolver=T;this.receiver=this}O.prototype.fulfilled=function(al){this.f.call(this.c,this.z,al,this.to)};O.prototype.rejected=function(al){this.to.reject(al)};O.prototype.progress=function(al){this.to.notify(al)};function B(al){return al instanceof S}function af(al){return(typeof al==="object"||typeof al==="function")&&al!==null}function k(ao,am,an,al){if(typeof ao!=="function"){return al.become(am)}S.enterContext(am);J(ao,am.value,an,al);S.exitContext()}function ak(ap,al,an,ao,am){if(typeof ap!=="function"){return am.become(an)}S.enterContext(an);V(ap,al,an.value,ao,am);S.exitContext()}function Y(ap,al,an,ao,am){if(typeof ap!=="function"){return am.notify(al)}S.enterContext(an);ah(ap,al,ao,am);S.exitContext()}function y(an,am,al){try{return an(am,al)}catch(ao){return I(ao)}}function J(ao,al,am,an){try{an.become(j(ao.call(am,al)))}catch(ap){an.become(new ag(ap))}}function V(ao,al,aq,am,an){try{ao.call(am,al,aq,an)}catch(ap){an.become(new ag(ap))}}function ah(ao,al,am,an){try{an.notify(ao.call(am,al))}catch(ap){an.notify(ap)}}function w(al,am){am.prototype=A(al.prototype);am.prototype.constructor=am}function W(al,am){return am}function ae(){}function N(){if(typeof process!=="undefined"&&process!==null&&typeof process.emit==="function"){return function(am,al){return am==="unhandledRejection"?process.emit(am,al.value,al):process.emit(am,al)}}else{if(typeof self!=="undefined"&&typeof CustomEvent==="function"){return(function(an,al,ao){var aq=false;try{var am=new ao("unhandledRejection");aq=am instanceof ao}catch(ap){}return !aq?an:function(at,ar){var au=new ao(at,{detail:{reason:ar.value,key:ar},bubbles:false,cancelable:true});return !al.dispatchEvent(au)}}(ae,self,CustomEvent))}}return ae}return S}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],25:[function(f,g,e){(function(h){h(function(){return{pending:j,fulfilled:k,rejected:i,inspect:l};function j(){return{state:"pending"}}function i(m){return{state:"rejected",reason:m}}function k(m){return{state:"fulfilled",value:m}}function l(m){var n=m.state();return n===0?j():n>0?k(m.value):i(m.value)}})}(typeof d==="function"&&d.amd?d:function(h){g.exports=h()}))},{}],26:[function(f,g,e){(function(h){h(function(l){var r=l("./when");var n=l("./lib/liftAll");var p=l("./lib/env").setTimer;var s=Array.prototype.slice;var j=l("./lib/apply")(r.Promise,o);return{lift:k,liftAll:q,apply:t,call:v,createCallback:i,bindCallback:m,liftCallback:u};function t(x,w){return j(x,this,w||[])}function o(A,x,y,z){var w=i(z);try{switch(y.length){case 2:A.call(x,y[0],y[1],w);break;case 1:A.call(x,y[0],w);break;case 0:A.call(x,w);break;default:y.push(w);A.apply(x,y)}}catch(B){z.reject(B)}}function v(w){return j(w,this,s.call(arguments,1))}function k(w){var x=arguments.length>1?s.call(arguments,1):[];return function(){var y=x.length;var B=arguments.length;var z=new Array(B+y);var A;for(A=0;A<y;++A){z[A]=x[A]}for(A=0;A<B;++A){z[A+y]=arguments[A]}return j(w,this,z)}}function q(x,w,y){return n(k,w,y,x)}function i(w){return function(x,y){if(x){w.reject(x)}else{if(arguments.length>2){w.resolve(s.call(arguments,1))}else{w.resolve(y)}}}}function m(y,z){y=r(y);if(z){y.then(x,w)}return y;function x(A){w(null,A)}function w(A,B){p(function(){z(A,B)},0)}}function u(w){return function(x){return m(x,w)}}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./lib/apply":11,"./lib/env":21,"./lib/liftAll":23,"./when":32}],27:[function(f,g,e){(function(h){h(function(j){var i=j("./when");var k=i.Promise.all;var m=Array.prototype.slice;return function l(n){return k(m.call(arguments,1)).then(function(o){return i.map(n,function(p){return p.apply(void 0,o)})})}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./when":32}],28:[function(f,g,e){(function(h){h(function(k){var i=k("./when");var l=i.Promise.all;var m=Array.prototype.slice;return function j(o){var n=function(q,p){n=function(r,s){return s(r)};return p.apply(null,q)};return l(m.call(arguments,1)).then(function(p){return i.reduce(o,function(q,r){return n(q,r)},p)})}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./when":32}],29:[function(f,g,e){(function(h){h(function(k){var i=k("./when");var l=i["try"];var j=k("./cancelable");return function m(n,o,u,p){var v,r,w;r=false;v=j(i.defer(),function(){r=true});w=v.reject;u=u||function(){return false};if(typeof o!=="function"){o=(function(x){return function(){return i().delay(x)}})(o)}function t(x){v.resolve(x)}function q(x){l(o).then(s,w);if(x!==void 0){v.notify(x)}}function s(){if(r){return}i(n(),function(x){i(u(x),function(y){return y?t(x):q(x)},function(){q(x)})},w)}if(p){q()}else{s()}v.promise=Object.create(v.promise);v.promise.cancel=v.cancel;return v.promise}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./cancelable":3,"./when":32}],30:[function(f,g,e){(function(h){h(function(j){var i=j("./when");var k=i.Promise.all;var l=Array.prototype.slice;return function m(p){var o=[];return k(l.call(arguments,1)).then(function(q){return i.reduce(p,function(s,r){return i(r.apply(void 0,q),n)},o)});function n(q){o.push(q);return o}}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./when":32}],31:[function(f,g,e){(function(h){h(function(j){var i=j("./when");return function k(m,l){return i(l).timeout(m)}})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./when":32}],32:[function(f,g,e){(function(h){h(function(s){var D=s("./lib/decorators/timed");var r=s("./lib/decorators/array");var m=s("./lib/decorators/flow");var n=s("./lib/decorators/fold");var G=s("./lib/decorators/inspect");var C=s("./lib/decorators/iterate");var q=s("./lib/decorators/progress");var E=s("./lib/decorators/with");var B=s("./lib/decorators/unhandledRejection");var v=s("./lib/TimeoutError");var l=[r,m,n,C,q,G,E,D,B].reduce(function(I,H){return H(I)},s("./lib/Promise"));var A=s("./lib/apply")(l);p.promise=z;p.resolve=l.resolve;p.reject=l.reject;p.lift=t;p["try"]=x;p.attempt=x;p.iterate=l.iterate;p.unfold=l.unfold;p.join=y;p.all=j;p.settle=w;p.any=t(l.any);p.some=t(l.some);p.race=t(l.race);p.map=F;p.filter=u;p.reduce=t(l.reduce);p.reduceRight=t(l.reduceRight);p.isPromiseLike=o;p.Promise=l;p.defer=k;p.TimeoutError=v;function p(H,L,I,K){var J=l.resolve(H);if(arguments.length<2){return J}return J.then(L,I,K)}function z(H){return new l(H)}function t(H){return function(){for(var K=0,J=arguments.length,I=new Array(J);K<J;++K){I[K]=arguments[K]}return A(H,this,I)}}function x(K){for(var J=0,I=arguments.length-1,H=new Array(I);J<I;++J){H[J]=arguments[J+1]}return A(K,this,H)}function k(){return new i()}function i(){var K=l._defer();function J(L){K._handler.resolve(L)}function I(L){K._handler.reject(L)}function H(L){K._handler.notify(L)}this.promise=K;this.resolve=J;this.reject=I;this.notify=H;this.resolver={resolve:J,reject:I,notify:H}}function o(H){return H&&typeof H.then==="function"}function y(){return l.all(arguments)}function j(H){return p(H,l.all)}function w(H){return p(H,l.settle)}function F(H,I){return p(H,function(J){return l.map(J,I)})}function u(I,H){return p(I,function(J){return l.filter(J,H)})}return p})})(typeof d==="function"&&d.amd?d:function(h){g.exports=h(f)})},{"./lib/Promise":8,"./lib/TimeoutError":10,"./lib/apply":11,"./lib/decorators/array":12,"./lib/decorators/flow":13,"./lib/decorators/fold":14,"./lib/decorators/inspect":15,"./lib/decorators/iterate":16,"./lib/decorators/progress":17,"./lib/decorators/timed":18,"./lib/decorators/unhandledRejection":19,"./lib/decorators/with":20}]},{},[1])(1)});